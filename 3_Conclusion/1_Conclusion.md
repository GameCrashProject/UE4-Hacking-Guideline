# 결론
BoB 프로젝트를 통해 약 4개월 간 게임 취약점에 대한 경각심 제고와 게임 엔진 보안성 향상을 목적으로  UE4의 보안 취약점을 분석했다. 공격 벡터를 크게 리소스 파일과 네트워크 기능으로 분류했고, 각각에 대해 퍼징 과 코드 오디팅을 수행했다. 리소스 파일의 경우 코드 분석을 통해 세부적으로  UE4에서 uasset, umap과 같은 자체적으로 개발한 포맷들과 BMP와 같은 자체적으로 구현한 파서가 존재하는 포맷을 분석 대상으로 선정했다. 네트워크의 경우 세부적으로 RPC 기능과 픽셀 스트리밍 기능을 선정하고 이에 대해 퍼징과 코드 오디팅을 수행했다.

프로젝트에 WinAFL, AFL++, Dumb Fuzzer등 다양한 퍼저를 사용했고 이를 통해 Stack Buffer Overflow, Out Of Bounds Read, Use After Free, Integer Underflow등의 버그를 찾을 수 있었다. 이중 리소스 파일에서 파일 로딩시 발생한 Stack Buffer Overflow 취약점을 이용해 익스플로잇까지 성공시켰다. 이는 헤더 부분에서 길이을 파싱하고 그 길이 만큼 바디를 스택에 복사하는 과정에서 헤더의 길이에 대한 검증이 없어 발생했다. 두 취약점 모두 리눅스 환경에서 스택 프로텍터도 삽입되어 있지 않고 PIE 보호 기법도 걸려있지 않아 쉽게 Exploit을 수행할 수 있었다. 또한 umap 파일에서 발생하는 취약점은 윈도우에서도 스택 프로텍터가 삽입되어있지 않았고, ASLR이 걸리지 않은 모듈이 존재하였기 때문에 익스플로잇이 가능했다. 간단한 코드 한 줄로도 해당 취약점을 방지할 수 있던 것으로 볼 때에 추후 더욱더 게임 엔진 취약점에 대한 경각심이 필요함을 느꼈다.

네트워크의 경우 픽셀 스트리밍 기능에서 악성 패킷을 전송해 OOB Read 취약점이 트리거되며 서버가 다운되는 Dos 취약점을 발견했다. 하지만 RPC의 경우 패킷을 파싱하는 부분을 대상으로 퍼징을 시도했으나 검증 과정이 너무나 복잡하고 이를 우회하는데 실패해 RPC 함수 퍼징 을 적용하지 못했다. 추가로 전체적으로 UE4의 경우 게임을 실행할 때에 복잡한 과정을 거쳐 게임을 초기화하고 실행시키기 때문에 퍼징을 위해 상당한 컴퓨터 사양이 요구되었고 퍼징  진행 속도가 다른 프로그램에 비해 현저히 느려 크래시 발생에 시간이 너무 오래 걸리는 한계점이 존재한다.

본 팀은 기간 내에 프로젝트 목표 달성을 위해 수행하며 적절한 성과를 거둘 수 있었다. 하지만 여러가지 한계점들도 존재했고 이로 인해 아쉬운 부분도 많았다고 느낀다. 프로젝트의 전체 진행 과정을 공유하며 이후 UE4를 비롯한 게임엔진을 분석하는 사람들에게 조금이나마 도움이 되었으면 한다.
